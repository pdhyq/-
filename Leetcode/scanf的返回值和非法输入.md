[相关链接](https://bbs.csdn.net/topics/100139967 "看评论区")
## 返回值
1. scanf 函数是有返回值的，它的返回值可以分成三种情况
1. 正整数，表示正确输入参数的个数。
例如执行 scanf(“%d %d”, &a, &b);
如果用户输入”3 4”，可以正确输入，返回2（正确输入了两个变量）；
如果用户输入”3,4”，可以正确输入a，无法输入b，返回1（正确输入了一个变量）。
2. 0，表示用户的输入不匹配，无法正确输入任何值。如上例，用户如果输入”,3 4”，返回0。
1. EOF，这是在 stdio.h 里面定义的常量（通常值为-1），表示输入流已经结束。在Windows下，用户按下CTRL+Z（会看到一个^Z字符）再按下回车（可能需要重复2次），就表示输入结束；Linux/Unix下使用CTRL+D表示输入结束。

## 非法输入
对于scanf("%d%c",&a,&c)，scanf语句执行时，首先试图从缓冲区中读入一个%d类型的数据，如果和第一个参数匹配，则继续从缓冲区中读取数据和第二个参数进行匹配，依次进行下去，直到匹配完所有的参数；<u>**如果其中有一个参数不匹配，那就从这个地方跳出，忽略这个scanf后面所有的参数，而去执行下一条语句。**</u>

可以用下面的程序验证一下：
```c
#include <stdio.h>
int main()
{
int a=123,b=1;
char c='t';
scanf("%d%d",&a,&b);
scanf("%c",&c);
printf("%d\n%d\n%c\n",a,b,c);
return 0;
}
```
输入：2 回车a 回车
结果是：
2
1
a
解决方法：scanf()函数执行成功时的返回值是成功读取的变量数,也就是说，你这个scanf()函数有几个变量

，如果scanf()函数全部正常读取，它就返回几。但这里还要注意另一个问题，如果输入了非法数据，键盘缓

冲区就可能还个有残余信息问题。
比如：
```c
#include <stdio.h>
main()
{
int a=123,b;
while(scanf("%d%d",&a,&b)!=2)
fflush(stdin);
printf("%d\n%d\n",a,b);
return 0;
}
你可以试一下，如果输入不是数字时，会有什么反应。

补充：scanf中一种很少见但很有用的转换字符：[...]和[ ^...]。
#include<stdio.h>
main()
{
char strings[100];
scanf("%[1234567890]",strings);
printf("%s",strings);
return 0;
}
```
运行，输入：1234werew后，结果是：1234。
通过运行可以发现它的作用是：如果输入的字符属于方括号内字符串中某个字符，那么就提取该字符；如果

一经发现不属于就结束提取。该方法会自动加上一个字符串结束符到已经提取的字符后面。
scanf("%[^1234567890]",strings); 它的作用是：如果一经发现输入的字符属于方括号内字符串中某个字符

，那么就结束提取；如果不属于就提取该字符。该方法会自动加上一个字符串结束符到已经提取的字符后面

。
注意：方括号两边不能空格，如：scanf("%[ 1234567890 ]",strings); scanf("%[ ^1234567890

]",strings); 不让空格也会算在里面的。
用这种方法还可以解决scanf的输入中不能有空格的问题。只要用
scanf("%[^\n]",strings); 就可以了。很神奇吧。