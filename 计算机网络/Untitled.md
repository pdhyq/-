**ip数据报分片：分片的数据载荷的最大长度取小于780且能整除8的最大整数**

**rip：若干次交换和更新后，每个路由器都知道到达本自治系统AS内各网络的最短距离和下一跳路由器， 称为收敛**

路由器不转发广播IP数据报，即路由器隔离广播域。 如果因特网中数量巨大的路由器收到广播IP数据报后 都进行转发，则会造成巨大的广播风暴，严重浪费 因特网资源。

一个大报文可能被划分为多个运输层 的报文段（这些报文段每个可能被划分为多个网络层数据报）。

**是否更新这条路由条目？：p282**

<img src="C:\Users\痞妖\AppData\Roaming\Typora\typora-user-images\image-20230620140156089.png" alt="image-20230620140156089" style="zoom:50%;" />

OSPF分组直接使用网际层的IP数据报进行封装，而不 像RIP报文需要使用运输层用户数据报协议UDP封装。从数 据包按网络体系结构逐层封装的角度看，OSPF属于网际层 协议，而RIP属于应用层协议（但其核心功能是路由选择， 属于网际层）。







# 应用层

在一对进程之间的通信会话场景中，发起通信（即在该会话开始时发起与其 他进程的联系）的进程被标识为客户，在会话开始时等待联系的进程是服务器（区分开 **客户-服务器体系结构** 和 **客户和服务器进程**）

进程与计算机网络之间的接口：进程通过一个称为**套接字（socket）的软件接口**向网络发送报文和从网络接收报文。

**套接字是同一台主机内应用 层与运输层之间的接口。由于该套接字是建立网络应用程序的可编程接口，因此套接字也 称为应用程序和网络之间的应用程序编程接口**（Application Programming Interface, API）。应用程序开发者可以控制套接字在应用层端的一切，但是对该套接字的运输层端几乎没有 控制权。应用程序开发者对于运输层的控制仅限于：①选择运输层协议；②也许能设定几 个运输层参数，如最大缓存和最大报文段长度等（将在第3章中涉及）。**一旦应用程序开 发者选择了一个运输层协议（如果可供选择的话），则应用程序就建立在由该协议提供的 运输层服务之上**。我们将在2. 7节中对套接字进行更为详细的探讨。

<img src="C:\Users\痞妖\AppData\Roaming\Typora\typora-user-images\image-20230426133924181.png" alt="image-20230426133924181" style="zoom: 50%;" />

**为了向特定目的地发送邮政邮件，目的地需要有一个地址。类似地，在一台主机上运 行的进程为了向在另一台主机上运行的进程发送分组，接收进程需要有一个地址。①主机的地址；②在目的主机中指定接收进程的标识符**

* 在因特网中，主机由其IP地址(IP address)标识

* 发送进程还必须指定运行在接收主机上的接收进程(更具体地说，接收套接字)。因为一般而言一台主机能够运行许多网络应用, 这些信息是需要的。目的地端口号(port number)用于这个目的。

一个运输层协议能够为调用它的应用程序提供什么样的服务呢？我们大体能够从四个 方面对应用程序服务要求进行分类：可靠数据传输、吞吐量、定时和安全性。

**因特网（更一般的是TCP/IP网络）为应用程序提供 两个运输层协议，即UDP和TCP**

* TCP服务，TCP服务模型包括**面向连接服务和可靠数据传输服务**

* UDP是一种不提供不必要服务的轻量级运输协议，它仅提供最小服务

无论TCP还是UDP都没有提供任何加密机制，这就是说发送进程传进其套接字的 数据，与经网络传送到目的进程的数据相同，因特网界已经研制了**TCP的加强版本，称为安全套接字层（Secure Sockets Layer, SSL）** 。用SSL加强后的TCP不仅能够做 传统的TCP所能做的一切，而且提供了关键的进程到进程的安全性服务，包括加密、数 据完整性和端点鉴别。**我们强调SSL不是与TCP和UDP在相同层次上的第三种因特网运输协议，而是一种对TCP的加强，这种强化是在==应用层==上实现的。**

**因特网运输协议所不提供的服务**：在我 们对TCP和UDP的简要描述中，明显地漏掉了对吞吐量或定时保证的讨论，即**这些服务目前的因特网运输协议并没有提供。今天的因特网通常能够为时间敏感应用提供满意的服务，但它不能提供任何定时或带宽保证**



**HTTP使用TCP作为它的支撑运输协议**

**分层体系结构最大的优点，即HTTP协议不用担心数据丢失，也不关注TCP从网络的数据丢失和乱序故障中恢复的细节。那是TCP以及协议栈较 低层协议的工作。**

==因为HTTP服务器并不保存关于客户的任何信息，所以 我们说HTTP是一个**无状态协议**==



#### 非持续连接和持续连接

每个请求/响应对是经**一个单独的TCP**连接发送，还是所有的请求及其响应**经相同的TCP连接**发送呢？采用前一种方法，该应用程序被称为使用非持续连接(non-persistent connection)； 采用后一种方法，该应用程序被称为使用持续连接(persistent connection) °

HTTP既能够使用非持续连接，也能够使用持续连接。

在非持续连接中，每个TCP连接只传输一个请求报文和响应报文就断开连接

**往返时间**：往返时间（Round Trip Time, RTF）的定义， 该时间是指一个短分组从客户到服务器然后 再返回客户所花费的时间

每台邮件服务器上既能运行SMTP的客户端也运行SMTP的服务器端

#### http和SMTP协议对比



* **http是一个拉协议：用户使用http从服务器拉取这些信息。特别是TCP连接是由想接收文件的机器发起**

* **SMTP是一个推协议，发送邮件服务器把文件推向接收邮件服务器。特别是TCP连接由要发送文件的机器发起**

* SMTP要求每个报文采用7比特ascll码格式，如果报文中包含非7比特ascll字符或者二进制文件（如图像文件），报文必须按照7比特ascll码进行编码。http不受这种限制。
* 如何处理一个即包含文本又包含图行的文档。http是把每个对象封装到它的http响应报文中，而SMTP则把所有报文对象放在一个报文中。

因为SMTP是一个推协议，只能是发送方主动建立连接，所以接收方不能通过smtp协议，从邮件服务器获得报文，因为取报文是个拉操作，

![image-20230515113420489](C:\Users\痞妖\AppData\Roaming\Typora\typora-user-images\image-20230515113420489.png)



就像上图所示，alice从用户代理一直到bob的邮件服务器都是smtp协议。所以需要引用新的协议解决问题。（POP3，IMAP，http）

SMTP用来将邮件从发送方的邮件 服务器传输到接收方的邮件服务器；SMTP也用来将邮件从发送方的用户代理传送到发送 方的邮件服务器。如POP3这样的邮件访问协议用来将邮件从接收方的邮件服务器传送到 接收方的用户代理

